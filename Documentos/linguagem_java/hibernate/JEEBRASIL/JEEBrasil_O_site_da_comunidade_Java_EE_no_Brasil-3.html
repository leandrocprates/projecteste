<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!-- saved from url=(0038)http://www.jspbrasil.com.br/mostrar/86 -->
<HTML><STYLE>#gview-cmenu {
  position: absolute;
  border: 1px solid #ccc;
  background: #fff;
  margin: 0;
  padding: 0;
  top: 0;
  left: 0;
  z-index: 10000;
  list-style-type: none;
  -webkit-box-shadow: 0 3px 5px rgba(0, 0, 0, .5);
}

#gview-cmenu:focus {
  outline: none;
}

.gview-cmenu-item {
  margin: 0;
  padding: 5px 7px;
  cursor: default;
  font-size: 13px;
  font-family: arial, san-serif;
  color: #000;
  -webkit-user-select: none;
}

.gview-cmenu-item:hover {
  background-color: #F0F7F9;
}

.gview-cmenu-item:first-child {
  border-bottom: 1px solid #ddd;
}

.gview-hidden {
  display: none;
}
</STYLE><HEAD><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<TITLE>JEEBrasil -- O site da comunidade Java EE no Brasil</TITLE>

<SCRIPT type="text/javascript" src="./JEEBrasil_O_site_da_comunidade_Java_EE_no_Brasil-3_files/prototype.js"></SCRIPT>
<SCRIPT type="text/javascript" src="./JEEBrasil_O_site_da_comunidade_Java_EE_no_Brasil-3_files/effects.js"></SCRIPT>
<SCRIPT type="text/javascript" src="./JEEBrasil_O_site_da_comunidade_Java_EE_no_Brasil-3_files/validation.js"></SCRIPT>
<SCRIPT type="text/javascript" src="./JEEBrasil_O_site_da_comunidade_Java_EE_no_Brasil-3_files/votacao.js"></SCRIPT>
<SCRIPT type="text/javascript" src="./JEEBrasil_O_site_da_comunidade_Java_EE_no_Brasil-3_files/form.js"></SCRIPT>

<LINK href="./JEEBrasil_O_site_da_comunidade_Java_EE_no_Brasil-3_files/layout.css" rel="stylesheet" type="text/css">
<LINK href="./JEEBrasil_O_site_da_comunidade_Java_EE_no_Brasil-3_files/rating.css" rel="stylesheet" type="text/css">
<LINK href="./JEEBrasil_O_site_da_comunidade_Java_EE_no_Brasil-3_files/style.css" rel="stylesheet" type="text/css">
<LINK href="./JEEBrasil_O_site_da_comunidade_Java_EE_no_Brasil-3_files/forms.css" rel="stylesheet" type="text/css">
</HEAD><BODY>

<DIV id="page">

<!-- Cabeçalho -->
<DIV id="header">

	<DIV id="header-top">
		<H1> <A href="http://www.jspbrasil.com.br/">JEE<SPAN class="greenText">Brasil</SPAN></A> </H1>
		<H2> O site da comunidade Java EE no Brasil </H2>
	
		<DIV id="encontre">
			<H3> Encontre </H3>
			<FORM action="http://www.jspbrasil.com.br/find" method="post" id="buscaForm">
				<P>
				<INPUT id="campo" name="busca" type="text" size="26">
				<A href="http://www.jspbrasil.com.br/mostrar/86#" onclick="$(&#39;buscaForm&#39;).submit();"> Buscar </A>
				</P>
			</FORM>
		</DIV>
	</DIV>
	
	<DIV id="menu">
		<UL>
			<LI> <A href="http://www.jspbrasil.com.br/">Home</A> </LI>
			<LI> <A href="http://www.jspbrasil.com.br/noticias">Notícias</A> </LI>
			<LI> <A href="http://www.jspbrasil.com.br/eventos">Eventos</A> </LI>
			<LI> <A href="http://www.jspbrasil.com.br/artigos">Artigos</A> </LI>
			<LI> <A href="http://www.jspbrasil.com.br/tutoriais">Tutoriais</A> </LI>
			<LI> <A href="http://www.jspbrasil.com.br/tags">Tags</A> </LI>			
			<LI> <A href="http://www.jspbrasil.com.br/apresentacoes">Apresentações</A> </LI>
			<LI> <A href="http://www.jspbrasil.com.br/quemsomos">Quem Somos</A> </LI>	
			<LI id="areaRestrita"> <A href="http://www.jspbrasil.com.br/admin"><IMG src="./JEEBrasil_O_site_da_comunidade_Java_EE_no_Brasil-3_files/chave.gif" alt="Administra&ccedil;&atilde;o"></A></LI>			
		</UL>
	</DIV>
	
</DIV>

<DIV id="content">


	<DIV id="fullPanel">
		<DIV id="rightPanel">
			<H4 class="informacoes"> Informações </H4>
			<TABLE>
				<TBODY><TR>
					<TH> Tipo: </TH>
					<TD> Tutorial </TD>
				</TR>
				<TR>
					<TH> Data de Publicação: </TH>
					<TD> 01/05/2007 </TD>
				</TR>
				<TR>
					<TH> Revisado em:</TH>
					<TD> 01/05/2007 </TD>
				</TR>
			</TBODY></TABLE>
			<H4 class="nota" id="user-note">
				
				Vote!
				
				
			</H4>
			<UL class="star-rating" id="voting">
				<LI class="current-rating" id="current-rating" style="width: 116.75px">Currently 4,7/5 Stars.</LI>
				
				<LI><A href="http://www.jspbrasil.com.br/mostrar/86#" onclick="javascript:votar(86,1, &#39;&#39;);" title="muito ruim" class="one-star">1</A></LI>
				<LI><A href="http://www.jspbrasil.com.br/mostrar/86#" onclick="javascript:votar(86,2, &#39;&#39;);" title="ruim" class="two-stars">2</A></LI>
				<LI><A href="http://www.jspbrasil.com.br/mostrar/86#" onclick="javascript:votar(86,3, &#39;&#39;);" title="mais ou menos" class="three-stars">3</A></LI>
				<LI><A href="http://www.jspbrasil.com.br/mostrar/86#" onclick="javascript:votar(86,4, &#39;&#39;);" title="bom" class="four-stars">4</A></LI>
				<LI><A href="http://www.jspbrasil.com.br/mostrar/86#" onclick="javascript:votar(86,5, &#39;&#39;);" title="muito bom" class="five-stars">5</A></LI>
				
			</UL>
			
			<H4 class="tagsRelacionadas">Tags Relacionadas</H4>
			<P class="tags">
				
				<A href="http://www.jspbrasil.com.br/tags/hibernate">hibernate</A>
				
				<A href="http://www.jspbrasil.com.br/tags/anotacoes">anotacoes</A>
				
				<A href="http://www.jspbrasil.com.br/tags/persistencia">persistencia</A>
				
			</P>
			<H4 class="comentarios"><A href="http://www.jspbrasil.com.br/mostrar/86#comentarios">Comentários ( 0 )</A></H4>
			<H4 class="imprimir">Imprimir</H4>
		</DIV>

		<DIV id="tituloPublicacao">
			<H3> Mapeando Atributos de Classes com Anotações Hibernate </H3>
			<P class="autores">
				por:<BR>
				</P><P class="autor">
				
				Raphaela Galhardo Fernandes (raphaela@jeebrasil.com.br)<BR>
				
				Gleydson Lima (gleydson@jeebrasil.com.br)<BR>
				
				</P>
			<P></P>

			<P class="resumo">
			Este tutorial destina-se a apresentar alguns exemplos de mapeamentos de atributos de uma classe, usando anotações 
Hibernate. Os atributos mapeados e apresentados não correspondem a associações/relacionamentos entre tabelas, ou seja, 
associações <EM>many-to-many</EM>, <EM>one-to-many</EM>,<EM> one-to-one</EM> ou <EM>many-to-one</EM>.

			</P>

			<H4>  </H4>
		</DIV>

		<DIV id="corpoPublicacao">
			<H4>1. Mapeando Atributos da Classe </H4>


<P>
Considerando a classe <B>Cliente</B>, exibida na Figura 1, composta de um conjunto de atributos, onde um deles (<B>id</B>) corresponde à chave primária da tabela correspondente. Dessa forma, pode-se criar uma tabela <B>cliente</B> na base de dados a partir do script mostrado na e Listagem 1.\</P>

<P align="center">
<IMG src="./JEEBrasil_O_site_da_comunidade_Java_EE_no_Brasil-3_files/img-02.JPG">
</P>
<P class="legenda">
Figura 1 - Classe Cliente
</P>


<PRE>CREATE TABLE anotacoes.cliente
(
  id_cliente integer NOT NULL,
  cpf bigint NOT NULL,
  nome character(40) NOT NULL,
  endereco character(100),
  total_compras numeric(16,2),
  data_cadastro timestamp without time zone NOT NULL,
  data_nascimento date
) 
WITHOUT OIDS;
ALTER TABLE anotacoes.cliente OWNER TO postgres;

</PRE>

<P class="legenda">
Listagem 1 – Script para a Criação da Tabela cliente
</P>


<P>
A classe Cliente, ilustrada pela Listagem 2, possui exemplos de mapeamentos de atributos a partir das anotações: 
<B>@Column</B>, <B>@Transient</B>,<B> @Temporal</B>. As anotações <B>@Id</B> e <B>@GeneratedValue</B> também são utilizadas e servem para mapear a 
chave primária da tabela correspondente e definir como o seu valor será gerado, respectivamente, como explicado no tutorial anterior.
</P><P>

</P><PRE>package br.com.jeebrasil.hibernate.anotacoes.dominio;

import javax.persistence.*;

@Entity
@Table(name="cliente", schema="anotacoes")
public class Cliente {

	@Transient
	private int temporaria;

	@Id
	@GeneratedValue(strategy = GenerationType.SEQUENCE)
	@Column(name="id_cliente")
	private int id;
	@Column(unique=true, nullable=false, 
				insertable=true, updatable=true)
	private long cpf;
	@Column(nullable=false, length=40, 
				insertable=true, updatable=true)
	private String nome;
	@Column(length=100)
	private String endereco;
	@Column(name="total_compras", precision=2)
	private double totalCompras;

	@Column(name="data_nascimento", nullable=false)
	@Temporal(TemporalType.DATE)
	private Date dataNascimento;
	@Column(name="data_cadastro")
	@Temporal(TemporalType.TIMESTAMP)
	private Date dataCadastro;

	public Cliente(){}

	//Métodos getters e setters
}

</PRE>
<P class="legenda">
Listagem 2 – Mapeamento da Classe Cliente com Anotações
</P>


<P>
A seguir uma breve descrição das anotações utilizadas:
</P>

<P>
 </P><UL>
      <LI>Anotação <B>@Transient</B>: informa que o atributo mapeado não possui correspondente na tabela mapeada pela classe, ou seja, não é um atributo persistente;</LI>
      <LI>Atributos da anotação <B>@Column</B> utilizados:
	<UL>
		<LI><B>name</B>: nome da coluna na tabela do banco de dados que representa o atributo;</LI>
		<LI><B>unique</B>: indica se a coluna na tabela que representa o atributo possui a restrição de unicidade ou não. Por padrão, assume o valor false;</LI>
		<LI><B>nullable</B>: indica se a coluna na tabela que representa o atributo pode assumir valor nulo ou não. Por padrão, assume o valor true,
indicando que pode assumir valores nulos;</LI>
		<LI><B>length</B>: informa o tamanho máximo assumido pelo valor da coluna na tabela;</LI>
		<LI><B>precision</B>: informa a precisão decimal dos possíveis valores para a coluna mapeada pelo atributo;</LI>
		<LI><B>insertable</B>: indica se o atributo será inserido no momento da inserção de uma linha na tabela. Por padrão assume o valor true;</LI>
		<LI><B>updatable</B>: indica se o atributo será atualizado no momento da atualização de uma linha na tabela. Por padrão assume o valor true.</LI>

	
	
      
      <LI>Anotação <B>@Temporal</B>: utilizada para mapeamento de datas e hora. Recebe um valor como argumento que pode ser:
	<UL>
		<LI><B>TemporalType.DATE</B>: usado para mapear datas;</LI>
		<LI><B>TemporalType.TIME</B>: usado para mapear datas e hora;</LI>
		<LI><B>TemporalType.TIMESTAMP</B>: usado para mapear hora.</LI>

	</UL>
      </LI>
 </UL>
<P></P>


<H4>2.	Definição de Chave Primária Utilizando uma Seqüência Própria</H4>

<P>
Nos mapeamentos apresentado na seção anterior, a definição dos valores das chaves primárias foi feita apenas utilizando a 
seqüência <B>hibernate_sequence</B>.  O exemplo presente na Listagem 3 mostra o mapeamento da chave primária da tabela cliente 
utilizando a seqüência de nome <B>cliente_seq</B>. Para isso, utilizou-se as anotações <B>@SequenceGenerator</B> e <B>@GeneratedValue</B>. 
</P>

<P>
Na anotação <B>@SequenceGenerator</B> define-se qual seqüência criada na base de dados será utilizada para o mapeamento. No caso, 
nomeia-se a seqüência com o nome <B>SEQ_CLIENTE</B> (<B>name = “SEQ_CLIENTE”</B>). 
</P>

<P>
Para definir qual seqüência será utilizada no mapeamento da chave primária, utiliza-se a anotação <B>@GeneratedValue</B>, 
onde é informado que a definição do valor do atributo será através de seqüências (<B>strategy = GenerationType.SEQUENCE</B>) e 
o nome da mesma (<B>generator = "SEQ_CLIENTE"</B>).
</P>

<PRE>package br.com.jeebrasil.hibernate.anotacoes.dominio;
import javax.persistence.*;

@Entity
@Table(name="cliente", schema="anotacoes")
public class Cliente {

	@Id
	@SequenceGenerator(name = "SEQ_CLIENTE", 
			sequenceName = " anotacoes.cliente_seq")
	@GeneratedValue(	strategy = GenerationType.SEQUENCE, 
				generator = "SEQ_CLIENTE")	
	@Column(name="id_cliente")
	private int id;

	//...
}
</PRE>
<P class="legenda">
Listagem 3 – Mapeamento de Chave Primária Usando Seqüência Própria
</P>



<H4>3. Conclusões</H4>

<P>
Este tutorial foi breve, porém teve o intuito de apresentar o mapeamento de atributos da classe que não pertencem a relacionamentos. Também foi apresentado como se mapear uma chave primária para que a mesma tenha seu valor definido através de uma seqüência criada na base de dados.
</P>
<P>
Nos próximos tutoriais serão apresentados os mapeamentos de relacionamentos <EM>many-to-many</EM>, <EM>one-to-many</EM>,<EM> one-to-one</EM> ou <EM>many-to-one</EM>, 
de forma, que é importante ter em mente também o mapeamento dos tipos de atributos apresentados.
</P>
		</LI></UL></DIV>

		<A name="comentarios"></A>
		

	<DIV id="comente">
	<FORM action="http://www.jspbrasil.com.br/comentario" id="form" method="post">
	<FIELDSET>
		<LEGEND>Comente!</LEGEND>
		
		

		<DIV class="notes">
      	<H4>Observações</H4>
      	<P>Os campos em <STRONG>negrito</STRONG> são <STRONG>obrigatórios</STRONG>.</P>
      	<P>Para evitar problemas, este espaço é moderado. Após o envio do comentário será
      	necessário aguardar pela sua aprovação.</P>
    	</DIV> 
		
		<DIV class="obrigatorio">
		<LABEL for="nome">Nome:</LABEL> 
		<INPUT type="text" id="nome" class="required" name="nome" size="58" value="">
		</DIV>
		
		<DIV class="optional">
		<LABEL for="email">E-Mail:</LABEL> 
		<INPUT type="text" id="email" class="validate-email" name="email" size="58" value="">
		</DIV>
		
		<DIV class="optional">
		<LABEL for="site">Site:</LABEL> 
		<INPUT type="text" id="site" class="validate-url" name="site" size="58" value="">
		</DIV>
		
		<DIV class="obrigatorio">
		<LABEL for="texto">Comentário:</LABEL> 
		<TEXTAREA name="texto" id="texto" class="required" rows="5" cols="55"></TEXTAREA>
		</DIV>
		
	    <P class="botoes">    
			<INPUT type="submit" value="Enviar">
    	</P>
		
	</FIELDSET>

	<INPUT type="hidden" name="publicacao.id" value="86">
	</FORM>
	</DIV>
	<A name="bottom">


</A></DIV><A name="bottom"> <!-- fim de content -->

<SCRIPT type="text/javascript">
	var validForm = new Validation('form');
</SCRIPT>

</A></DIV><A name="bottom"> <!-- Fim de Content -->

</A><DIV id="footer"><A name="bottom">
	</A><A href="http://www.jspbrasil.com.br/quemsomos"> Quem Somos </A> &nbsp;|&nbsp;
	<A href="mailto:sugestoes@jeebrasil.com.br"> Fale Conosco</A>
	<P>Copyright 2006 - JEEBrasil.</P>
</DIV>

</DIV> <!-- fim de page -->



</BODY></HTML>