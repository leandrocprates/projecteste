<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0032)http://faq.infolink.com.br/Log4J -->
<HTML xmlns="http://www.w3.org/1999/xhtml" xml:lang="pt-br" lang="pt-br" dir="ltr"><HEAD><META http-equiv="Content-Type" content="text/html; charset=UTF-8">
		
		<META name="generator" content="MediaWiki 1.13.1">
		<META name="keywords" content="Log4J">
		<LINK rel="shortcut icon" href="http://faq.infolink.com.br/favicon.ico">
		<LINK rel="search" type="application/opensearchdescription+xml" href="http://faq.infolink.com.br/opensearch_desc.php" title="Perguntas Freq&uuml;entes (pt-br)">
		<LINK rel="alternate" type="application/rss+xml" title="Feed RSS Perguntas Freq&uuml;entes" href="http://faq.infolink.com.br/index.php?title=Especial:Mudan%C3%A7as_recentes&feed=rss">
		<LINK rel="alternate" type="application/atom+xml" title="Feed Atom Perguntas Freq&uuml;entes" href="http://faq.infolink.com.br/index.php?title=Especial:Mudan%C3%A7as_recentes&feed=atom">
		<TITLE>Log4J - Perguntas Freqüentes</TITLE>
		<STYLE type="text/css" media="screen, projection">/*<![CDATA[*/
			@import "/skins/common/shared.css?164";
			@import "/skins/monocms/main.css?164";
		/*]]>*/</STYLE>
		<LINK rel="stylesheet" type="text/css" media="print" href="./Log4J_Perguntas_Freqüentes_files/commonPrint.css">
		<!--[if lt IE 5.5000]><style type="text/css">@import "/skins/monocms/IE50Fixes.css?164";</style><![endif]-->
		<!--[if IE 5.5000]><style type="text/css">@import "/skins/monocms/IE55Fixes.css?164";</style><![endif]-->
		<!--[if IE 6]><style type="text/css">@import "/skins/monocms/IE60Fixes.css?164";</style><![endif]-->
		<!--[if IE 7]><style type="text/css">@import "/skins/monocms/IE70Fixes.css?164";</style><![endif]-->
		<!--[if lt IE 7]><script type="text/javascript" src="/skins/common/IEFixes.js?164"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->
		
		<SCRIPT type="text/javascript">/*<![CDATA[*/
var skin = "monocms";
var stylepath = "/skins";
var wgArticlePath = "/$1";
var wgScriptPath = "";
var wgScript = "/index.php";
var wgVariantArticlePath = false;
var wgActionPaths = [];
var wgServer = "http://faq.infolink.com.br";
var wgCanonicalNamespace = "";
var wgCanonicalSpecialPageName = false;
var wgNamespaceNumber = 0;
var wgPageName = "Log4J";
var wgTitle = "Log4J";
var wgAction = "view";
var wgArticleId = "151";
var wgIsArticle = true;
var wgUserName = null;
var wgUserGroups = null;
var wgUserLanguage = "pt-br";
var wgContentLanguage = "pt-br";
var wgBreakFrames = false;
var wgCurRevisionId = "2082";
var wgVersion = "1.13.1";
var wgEnableAPI = true;
var wgEnableWriteAPI = false;
var wgRestrictionEdit = [];
var wgRestrictionMove = [];
/*]]>*/</SCRIPT>
                
		<SCRIPT type="text/javascript" src="./Log4J_Perguntas_Freqüentes_files/wikibits.js"><!-- wikibits js --></SCRIPT><STYLE type="text/css">@import "/skins/monocms/KHTMLFixes.css";</STYLE>
		<SCRIPT type="text/javascript" src="./Log4J_Perguntas_Freqüentes_files/index.php"><!-- site js --></SCRIPT>
		<STYLE type="text/css">/*<![CDATA[*/
@import "/index.php?title=MediaWiki:Common.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=18000";
@import "/index.php?title=MediaWiki:Monocms.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=18000";
@import "/index.php?title=-&action=raw&gen=css&maxage=18000";
/*]]>*/</STYLE>
		<!-- Head Scripts -->
		<SCRIPT type="text/javascript" src="./Log4J_Perguntas_Freqüentes_files/ajax.js"></SCRIPT>
	</HEAD><BODY class="mediawiki ns-0 ltr page-Log4J">
	<DIV id="globalWrapper">
		<DIV id="column-content">
    <DIV class="banner" id="p-logoname">
        <P></P>
    </DIV>
	<DIV id="content">
		<A name="top" id="top"></A>
				<H1 class="firstHeading">Log4J</H1>
		<DIV id="bodyContent">
			<H3 id="siteSub">De Perguntas Freqüentes</H3>
			<DIV id="contentSub"></DIV>
									<DIV id="jump-to-nav">Ir para: <A href="http://faq.infolink.com.br/Log4J#column-one">navegação</A>, <A href="http://faq.infolink.com.br/Log4J#searchInput">pesquisa</A></DIV>			<!-- start content -->
			<DIV style="width:670px;margin:0 auto;" class="banner">
<P><IFRAME id="app01" frameborder="0" name="app01" width="100%" height="160" src="./Log4J_Perguntas_Freqüentes_files/jvm.html" style="border:solid 0px; margin:none;"></IFRAME>
</P>
</DIV>
<HR>
<TABLE id="toc" class="toc" summary="Tabela de conte&uacute;do"><TBODY><TR><TD><DIV id="toctitle"><H2>Tabela de conteúdo</H2> <SPAN class="toctoggle">[<A id="togglelink" class="internal" href="javascript:toggleToc()">esconder</A>]</SPAN></DIV>
<UL>
<LI class="toclevel-1"><A href="http://faq.infolink.com.br/Log4J#Este_artigo_aplica-se_a"><SPAN class="tocnumber">1</SPAN> <SPAN class="toctext">Este artigo aplica-se a</SPAN></A></LI>
<LI class="toclevel-1"><A href="http://faq.infolink.com.br/Log4J#Detalhes"><SPAN class="tocnumber">2</SPAN> <SPAN class="toctext">Detalhes</SPAN></A></LI>
<LI class="toclevel-1"><A href="http://faq.infolink.com.br/Log4J#Instala.C3.A7.C3.A3o"><SPAN class="tocnumber">3</SPAN> <SPAN class="toctext">Instalação</SPAN></A></LI>
<LI class="toclevel-1"><A href="http://faq.infolink.com.br/Log4J#Exemplo_de_C.C3.B3digo"><SPAN class="tocnumber">4</SPAN> <SPAN class="toctext">Exemplo de Código</SPAN></A></LI>
<LI class="toclevel-1"><A href="http://faq.infolink.com.br/Log4J#Arquivo_de_Configura.C3.A7.C3.A3o"><SPAN class="tocnumber">5</SPAN> <SPAN class="toctext">Arquivo de Configuração</SPAN></A></LI>
<LI class="toclevel-1"><A href="http://faq.infolink.com.br/Log4J#Observa.C3.A7.C3.B5es_.C3.9Ateis"><SPAN class="tocnumber">6</SPAN> <SPAN class="toctext">Observações Úteis</SPAN></A></LI>
</UL>
</TD></TR></TBODY></TABLE><SCRIPT type="text/javascript"> if (window.showTocToggle) { var tocShowText = "mostrar"; var tocHideText = "esconder"; showTocToggle(); } </SCRIPT>
<A name="Este_artigo_aplica-se_a"></A><H2> <SPAN class="mw-headline">Este artigo aplica-se a</SPAN></H2>
<UL><LI>Domínios hospedados em plataforma  Unix
</LI><LI> Domínios com o Serviço de JVM Dedicada
</LI></UL>
<A name="Detalhes"></A><H2> <SPAN class="mw-headline">Detalhes</SPAN></H2>
<P><B>Log4j</B> é uma biblioteca de uso fácil que permite a elaboração de “logs” de aplicação altamente configuráveis e de fácil implementação. É um padrão de facto muito utilizado em aplicações Java. Para o seu perfeito entendimento, é sugerido ao desenvolvedor a leitura do seu manual simplificado na seguinte URL:
<A href="http://logging.apache.org/log4j/docs/manual.html" class="external free" title="http://logging.apache.org/log4j/docs/manual.html" rel="nofollow">http://logging.apache.org/log4j/docs/manual.html</A>
</P><P>Lá estão descritos todos os conceitos necessários para a elaboração de uma aplicação fazendo uso de “Log4j”.
</P>
<A name="Instala.C3.A7.C3.A3o"></A><H2> <SPAN class="mw-headline">Instalação</SPAN></H2>
<P>Antes de tudo, é necessária a instalação da biblioteca que na sua forma mais simples, é efetuada através da cópia do arquivo “.jar” contendo a mesma para o diretório “WEB-INF/lib” do contexto onde ela será utilizada.
</P><P>A biblioteca pode ser obtida na sua forma binária de diversas fontes. A melhor e mais confiável é o seu “site” principal, ou seja:
</P><P><A href="http://logging.apache.org/log4j/docs/index.html" class="external free" title="http://logging.apache.org/log4j/docs/index.html" rel="nofollow">http://logging.apache.org/log4j/docs/index.html</A>
</P><P>Neste endereço encontram-se também as respectivas fontes e documentação. A biblioteca, geralmente possui um nome da seguinte forma “log4j-{versão}.jar”.
</P>
<A name="Exemplo_de_C.C3.B3digo"></A><H2> <SPAN class="mw-headline">Exemplo de Código</SPAN></H2>
<P>O Exemplo abaixo demonstra a simplicidade de implementação de “logs” utilizando “Log4j”:
</P>
<PRE>&lt;%@ page import="org.apache.log4j.Logger, org.apache.log4j.PropertyConfigurator"&nbsp;%&gt;
&lt;%!
Logger logger;
public void _jspInit() {
logger = Logger.getLogger("teste");
logger.debug("Inicando a aplicação.");
}
%&gt;
&lt;%
String path=getServletContext().getRealPath("/")+"WEB-INF/log4j.properties";
PropertyConfigurator.configure(path);
logger.info("Entrando na aplicação...");
// Aqui entra o código da aplicação...
logger.debug(“Mesnagem de debug”);
logger.info("Saindo da aplicação...");
%&gt;
</PRE>
<A name="Arquivo_de_Configura.C3.A7.C3.A3o"></A><H2> <SPAN class="mw-headline">Arquivo de Configuração</SPAN></H2>
<P>Como pode ser observado, o fragmento acima faz uso de um arquivo de configuração, “log4j.properties”, que foi posicionado no diretório “WEB-INF” do contexto da aplicação.
</P><P>Este arquivo poderá ter a seguinte sintaxe:
</P>
<PRE>log4j.rootLogger=INFO,A1
log4j.logger.teste=INFO,A1
log4j.appender.A1=org.apache.log4j.FileAppender
log4j.appender.A1.layout=org.apache.log4j.PatternLayout
log4j.appender.A1.layout.ConversionPattern=%d&nbsp;%-5p&nbsp;%c{2}&nbsp;%M.%L&nbsp;%x -&nbsp;%m\n
log4j.appender.A1.file=/virtual/dominio.com.br/logs/log.txt
</PRE>
<A name="Observa.C3.A7.C3.B5es_.C3.9Ateis"></A><H2> <SPAN class="mw-headline">Observações Úteis</SPAN></H2>
<P>Observando o fragmento de código e seu respectivo arquivo de configuração nota-se que:
</P><P>Na linha <B>“logger = Logger.getLogger("teste")”</B> seleciona o “logger” teste que é definido no arquivo de configuração;
</P><P>o “logger” teste utiliza o “appender” “FileAppender”, que irá redirecionar todas as saídas para o arquivo “/virtual/dominio.com.br/logs/log.txt”;
</P><P>note-se que todos os domínios hospedados na plataforma java são abrigados em baixo do diretório “/virtual”. Assim todos os arquivos pertencentes ao domínio “dominio.com.br” estarão posicionados no diretório “/virtual/dominio.com.br”;
</P><P>Através da manipulação da linha “log4j.logger.teste=” pode-se determinar que tipos de mensagens serão vistas no “log” - ALL, DEBUG, ERROR, FATAL, INFO, OFF ou WARN. Consulte a documentação para maiores detalhes;
</P><P>A função “getServletContext().getRealPath("/")”, permite que a obtenção do diretório onde o contexto está instalado, sem a necessidade de amarrar o código para esta localidade.
</P>
<!-- 
NewPP limit report
Preprocessor node count: 19/1000000
Post-expand include size: 202/2097152 bytes
Template argument size: 0/2097152 bytes
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key faq_infolink_com_br-wiki_:pcache:idhash:151-0!1!0!!pt-br!2!edit=0 and timestamp 20100109182344 -->
<DIV class="printfooter">
Obtido em "<A href="./Log4J_Perguntas_Freqüentes_files/Log4J_Perguntas_Freqüentes.html">http://faq.infolink.com.br/Log4J</A>"</DIV>
			<DIV id="catlinks"><DIV id="catlinks" class="catlinks"><DIV id="mw-normal-catlinks"><A href="http://faq.infolink.com.br/Especial:Categorias" title="Especial:Categorias">Categoria</A>: <SPAN dir="ltr"><A href="http://faq.infolink.com.br/Categoria:JSP_e_Servlets" title="Categoria:JSP e Servlets">JSP e Servlets</A></SPAN></DIV></DIV></DIV>			<!-- end content -->
			<DIV class="visualClear"></DIV>
		</DIV>
	</DIV>
	<DIV id="p-search">
		
		<DIV id="searchBody" class="pBody">
			<FORM action="http://faq.infolink.com.br/Especial:Busca" id="searchform"><DIV>
				<INPUT id="searchInput" name="search" type="text" title="Pesquisar nesta wiki [ctrl-alt-f]" accesskey="f" value="">
				<INPUT type="submit" name="go" class="searchButton" id="searchGoButton" value="Ir">&nbsp;
				<INPUT type="submit" name="fulltext" class="searchButton" id="mw-searchButton" value="Pesquisa">
			</DIV></FORM>
		</DIV>
	</DIV>
		</DIV>

<!-- INICIO DO MENU LATERAL HACK GUNTER-->





<DIV id="column-one">
	<DIV class="portlet" id="p-logo">
		<A style="background-image: url(http://faq.infolink.com.br/logo.png);" href="http://faq.infolink.com.br/P%C3%A1gina_principal" title="Visitar a p&aacute;gina principal [ctrl-alt-z]" accesskey="z"></A>
	</DIV>
	<SCRIPT type="text/javascript"> if (window.isMSIE55) fixalpha(); </SCRIPT>


<!--logo FIM-->


<!-- Edição Manual pelo Gunter, não confio no wiki ou ferramentas de design -->

<!-- Inicio Menu lateral -->
<DIV class="portlet" id="p-tb">
<H5>Categorias</H5>
<DIV class="pBody">
<UL>
<LI><A href="http://faq.infolink.com.br/Atalhos">Acesso Rápido</A></LI>
<LI><A href="http://faq.infolink.com.br/ASP">ASP</A></LI>
<LI><A href="http://faq.infolink.com.br/ASP.NET">ASP.NET</A></LI>
<LI><A href="http://faq.infolink.com.br/Backup">Backup</A></LI>
<LI><A href="http://faq.infolink.com.br/Biblioteca%20de%20Scripts">Biblioteca de Scripts</A></LI>
<LI><A href="http://faq.infolink.com.br/E-mail">E-mail</A></LI>
<LI><A href="http://faq.infolink.com.br/FTP">FTP</A></LI>
<LI><A href="http://faq.infolink.com.br/JSP_e_Servlets">JSP e Servlets</A></LI>
<LI><A href="http://faq.infolink.com.br/Loja%20Virtual">Loja Virtual</A></LI>
<LI><A href="http://faq.infolink.com.br/MySQL">MySQL</A></LI>
<LI><A href="http://faq.infolink.com.br/Perl">Perl</A></LI>
<LI><A href="http://faq.infolink.com.br/PHP">PHP</A></LI>
<LI><A href="http://faq.infolink.com.br/PostgreSQL">PostgreSQL</A></LI>
<LI><A href="http://faq.infolink.com.br/Python">Python</A></LI>
<LI><A href="http://faq.infolink.com.br/Revenda:_O_que_%C3%A9">Revenda</A></LI>
<LI><A href="http://faq.infolink.com.br/SQL">SQL</A></LI>
<!--<li><a href="/SQL_Server">SQL Server</a></li>-->
<LI><A href="http://faq.infolink.com.br/SSH">SSH</A></LI>
<LI><A href="http://faq.infolink.com.br/Gloss%C3%A1rio">Glossário</A></LI>
</UL>
</DIV>
</DIV>

<!-- Fim do Menu Lateral -->
<!-- Aqui o gunter terminou a edição manual -->







<!-- end of the left (by default at least) column -->


			<DIV class="visualClear"></DIV>
			<DIV id="footer">
			<UL id="f-list">
				<LI id="disclaimer"><A href="http://faq.infolink.com.br/Oferecido_por_MediaWiki" title="Oferecido por MediaWiki">Oferecido por MediaWiki</A></LI>

			</UL>
		</DIV>

	</DIV>


<!-- Served in 2.593 secs. --><SCRIPT src="./Log4J_Perguntas_Freqüentes_files/urchin.js" type="text/javascript">
</SCRIPT>
<SCRIPT type="text/javascript">
try {
_uacct = "UA-167374-5";
urchinTracker();
} catch(err) {}</SCRIPT>

</DIV></BODY></HTML>